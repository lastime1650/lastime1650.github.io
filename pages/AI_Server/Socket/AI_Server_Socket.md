---
layout: default
title: AI_Server_Socket
nav_order: 1
permalink: /pages/AI_Server/Socket
parent: AI_Server
typora-root-url: ../../../
---



# **AI서버와 중앙서버간 통신 과정을 설명합니다.**

### 중앙서버는 AI서버에게 자신의 VirusTotal API, EXE binary, SHA256등을 전달하여 AI요청을 하고 판단결과인 y값, float형태의 byte를 넘깁니다.<br>

<br>

---

## 풀이

<br>

이 AI서버와 중앙서버의 관계는 1:N 관계입니다. <br>

즉, AI서버는 Cloud형태로 운영될 수 있으며, 중앙서버 자체를 구매하여 **온프레미스**환경을 구축한 고객을 위하여 제공하는 AI 서비스입니다. <br>

AI서버는 100% Python으로 구축되었습니다. 또한 **Threading** 모듈을 이용하여 Client에서 요청이 올때 비동기 스레드를 생성하여 별도의 처리를 수행하고, **모델간 충돌**을 방지하기 위해 모델을 총 관리하는 클래스의 인스턴스를 자원공유하는 형태로 구현됩니다. <br>

또한 맬웨어 데이터 수집의 경우 자동화로 구현하였기 때문에, **비동기 프로그래밍이 중요**합니다.<br>

데이터세트는 DISK에 저장된 CSV포맷 파일의 형태로 총 2개가 저장됩니다. <br>

1. 악성인지 아닌지 판단하는 데이터세트 (단, 파일경로, 파일SHA256, y판단값 3개의 칼럼만 존재)
2. 중앙서버들이 요청하여 얻은 VirusTotal 의 결과를 담은 데이터세트 

특히 (2)에서 경제적 이득을 크게 얻습니다. <br>

VirusTotal의 API를 이용하여 분석요청하는 횟수는 정해져 있으며, 이를 크게 리미트가 적용된 라이선스를 판매하는 경우 몇천만원 후반의 가격이 발생합니다. 이러한 문제를 해결하기 위한 방법이 있습니다.<br>

AI서버에서 하나의 API를 가지고 훈련 및 예측시에 사용하지 않고, VirusTotal의 API부담은 Client가 부담하도록 AI요청시 전달받도록 구현하는 것입니다. 